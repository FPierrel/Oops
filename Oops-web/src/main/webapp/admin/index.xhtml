<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Oops | Moderation</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link href='https://fonts.googleapis.com/css?family=Kavoon' rel='stylesheet' type='text/css'/>
        <link href="style/style2.css" rel="stylesheet" type="text/css" />
    </h:head>
    <h:body>
        <ui:include src="../header.xhtml"/>
        <div id="featured-wrapper">
            <div id ="content">
                <div id="featured" class="container">
                    Bienvenue sur la page d'administration !
                    <h3>Avis non vérifié(s) :</h3>
                    <h:form id="avisEnAttente">
                        <h:dataTable id="datatable" value="#{adminBean.listeAvisNonVerifies}" var="avis">
                            <h:column>
                                <h:outputText value="#{avis.owner.login}"/>
                            </h:column>
                            <h:column>
                                <h:outputText value="#{avis.dateFormat}"/>
                            </h:column>
                            <h:column>
                                <h:outputText id="contenu" value="#{avis.contenu}"/>
                            </h:column>
                            <h:column>
                                <h:commandButton id="valider" value="Valider" action="#{adminBean.checkAvis(avis)}"/>
                            </h:column>
                            <h:column>
                                <h:commandButton id="supprimer" value="Supprimer" action="#{adminBean.removeAvis(avis)}"/>
                            </h:column>
                        </h:dataTable>
                    </h:form>

                    <h3>Signalement de profils non vérifiés :</h3>
                    <h:form id="signalementFicheEnAttente">

                        <h:dataTable id="datatableReport" value="#{adminBean.listUnverifiedReport}" var="report">
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Signalant" />
                                </f:facet>
                                <h:outputText id="reportingLogin" value="#{report.userReporting}"/>
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Date" />
                                </f:facet>
                                <h:outputText id="reportingDate" value="#{report.reportingDate}"/>
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Signalé" />
                                </f:facet>
                                <h:outputText id="reportedLogin" value="#{report.prestataire.login}"/>
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Motif" />
                                </f:facet>
                                <h:outputText id="reason" value="#{report.reason}"/>
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Complément" />
                                </f:facet>
                                <h:outputText id="complement" value="#{report.complement}"/>
                            </h:column>
                            <h:column>
                                <h:commandButton value="Voir" action="#{adminBean.seeFiche(report)}"/>
                            </h:column>
                            <h:column>
                                <h:commandButton id="warn" value="Justifié" action="#{adminBean.acceptReport(report)}"/>
                            </h:column>
                            <h:column>
                                <h:commandButton id="dismiss" value="Injustifié" action="#{adminBean.dismissReport(report)}"/>
                            </h:column>
                            

                        </h:dataTable>
                    </h:form>
                </div>
            </div>
        </div>
        <ui:include src="../footer.xhtml"/>
    </h:body>
</html>

